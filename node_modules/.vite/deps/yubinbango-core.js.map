{
  "version": 3,
  "sources": ["../../yubinbango-core/yubinbango-core.ts"],
  "sourcesContent": ["let CACHE = [];\nmodule YubinBango {\n  export class Core {\n    URL = 'https://yubinbango.github.io/yubinbango-data/data';\n    REGION: string[] = [\n      null, '北海道', '青森県', '岩手県', '宮城県',\n      '秋田県', '山形県', '福島県', '茨城県', '栃木県',\n      '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県',\n      '新潟県', '富山県', '石川県', '福井県', '山梨県',\n      '長野県', '岐阜県', '静岡県', '愛知県', '三重県',\n      '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県',\n      '和歌山県', '鳥取県', '島根県', '岡山県', '広島県',\n      '山口県', '徳島県', '香川県', '愛媛県', '高知県',\n      '福岡県', '佐賀県', '長崎県', '熊本県', '大分県',\n      '宮崎県', '鹿児島県', '沖縄県'\n    ];\n    constructor(inputVal: string = '', callback?) {\n      if(inputVal){\n        // 全角の数字を半角に変換 ハイフンが入っていても数字のみの抽出\n        const a:string = inputVal.replace(/[０-９]/g, (s: string) => String.fromCharCode(s.charCodeAt(0) - 65248));\n        const b:RegExpMatchArray = a.match(/\\d/g);\n        const c:string = b.join('');\n        const yubin7: string = this.chk7(c);\n        // 7桁の数字の時のみ作動\n        if (yubin7) {\n          this.getAddr(yubin7, callback);\n        } else {\n          callback(this.addrDic());\n        }\n      }\n    }\n    chk7(val: string) {\n      if (val.length === 7) {\n        return val;\n      }\n    }\n    addrDic(region_id = '', region = '', locality = '', street = '', extended = ''):{[key:string]: string} {\n      return {\n        'region_id': region_id,\n        'region': region,\n        'locality': locality,\n        'street': street,\n        'extended': extended\n      };\n    }\n    selectAddr(addr: string[]):{[key:string]: string} {\n      if (addr && addr[0] && addr[1]) {\n        return this.addrDic(addr[0],this.REGION[addr[0]],addr[1],addr[2],addr[3])\n      } else {\n        return this.addrDic()\n      }\n    }\n    jsonp(url: string, fn) {\n      window['$yubin'] = (data) => fn(data);\n      const scriptTag = document.createElement(\"script\");\n      scriptTag.setAttribute(\"type\", \"text/javascript\");\n      scriptTag.setAttribute(\"charset\", \"UTF-8\");\n      scriptTag.setAttribute(\"src\", url);\n      document.head.appendChild(scriptTag);\n    }\n    getAddr(yubin7: string, fn):{[key:string]: string} {\n      const yubin3 = yubin7.substr(0, 3);\n      // 郵便番号上位3桁でキャッシュデータを確認\n      if (yubin3 in CACHE && yubin7 in CACHE[yubin3]) {\n        return fn(this.selectAddr(CACHE[yubin3][yubin7]));\n      } else {\n        this.jsonp(`${this.URL}/${yubin3}.js`, (data) => {\n          CACHE[yubin3] = data;\n          return fn(this.selectAddr(data[yubin7]));\n        });\n      }\n    }\n  }\n}\n"],
  "mappings": ";AAAA,IAAI,QAAK,CAAA;AAAT,IACOA;AADQ,CACf,SAAOA,GAAAA;AACL,MAAAC,IAAA,WAAA;AAcE,aAAAA,GAAYC,IAAuBC,IAAAA;AACjC,UADU,WAAAD,OAAAA,KAAA,KAbZE,KAAAC,MAAM,qDACND,KAAAE,SAAAA,CACE,MAAM,OAAO,OAAO,OAAO,OAC3B,OAAO,OAAO,OAAO,OAAO,OAC5B,OAAO,OAAO,OAAO,OAAO,QAC5B,OAAO,OAAO,OAAO,OAAO,OAC5B,OAAO,OAAO,OAAO,OAAO,OAC5B,OAAO,OAAO,OAAO,OAAO,OAC5B,QAAQ,OAAO,OAAO,OAAO,OAC7B,OAAO,OAAO,OAAO,OAAO,OAC5B,OAAO,OAAO,OAAO,OAAO,OAC5B,OAAO,QAAQ,KAAA,GAGZJ,IAAS;AAEV,YAAMK,IAAWL,GAASM,QAAQ,UAAU,SAACC,IAAAA;AAAc,iBAAAC,OAAOC,aAAaF,GAAEG,WAAW,CAAA,IAAK,KAAA;QAAA,CAAA,GAC3FC,IAAqBN,EAAEO,MAAM,KAAA,GAC7BC,IAAWF,EAAEG,KAAK,EAAA,GAClBC,IAAiBb,KAAKc,KAAKH,CAAAA;AAE7BE,YACFb,KAAKe,QAAQF,GAAQd,EAAAA,IAErBA,GAASC,KAAKgB,QAAAA,CAAAA;MAAAA;IAAAA;AA6CtB,WAzCEnB,GAAAoB,UAAAH,OAAA,SAAKI,IAAAA;AACH,aAAmB,MAAfA,GAAIC,SACCD,KADT;IAAA,GAIFrB,GAAAoB,UAAAD,UAAA,SAAQI,IAAgBC,IAAaC,GAAeC,GAAaC,GAAAA;AAC/D,aADM,WAAAJ,OAAAA,KAAA,KAAgB,WAAAC,OAAAA,KAAA,KAAa,WAAAC,MAAAA,IAAA,KAAe,WAAAC,MAAAA,IAAA,KAAa,WAAAC,MAAAA,IAAA,KAAA,EAE7DJ,WAAaA,IACbC,QAAUA,IACVC,UAAYA,GACZC,QAAUA,GACVC,UAAYA,EAAAA;IAAAA,GAGhB3B,GAAAoB,UAAAQ,aAAA,SAAWC,IAAAA;AACT,aAAIA,MAAQA,GAAK,CAAA,KAAMA,GAAK,CAAA,IACnB1B,KAAKgB,QAAQU,GAAK,CAAA,GAAG1B,KAAKE,OAAOwB,GAAK,CAAA,CAAA,GAAIA,GAAK,CAAA,GAAGA,GAAK,CAAA,GAAGA,GAAK,CAAA,CAAA,IAE/D1B,KAAKgB,QAAAA;IAAAA,GAGhBnB,GAAAoB,UAAAU,QAAA,SAAMC,IAAaC,GAAAA;AACjBC,aAAe,SAAI,SAACC,IAAAA;AAAS,eAAAF,EAAGE,EAAAA;MAAAA;AAChC,UAAMC,KAAYC,SAASC,cAAc,QAAA;AACzCF,MAAAA,GAAUG,aAAa,QAAQ,iBAAA,GAC/BH,GAAUG,aAAa,WAAW,OAAA,GAClCH,GAAUG,aAAa,OAAOP,EAAAA,GAC9BK,SAASG,KAAKC,YAAYL,EAAAA;IAAAA,GAE5BnC,GAAAoB,UAAAF,UAAA,SAAQF,IAAgBgB,GAAAA;AAAxB,UAAAS,IAAAtC,MACQuC,KAAS1B,GAAO2B,OAAO,GAAG,CAAA;AAEhC,aAAID,MAAUE,SAAS5B,MAAU4B,MAAMF,EAAAA,IAC9BV,EAAG7B,KAAKyB,WAAWgB,MAAMF,EAAAA,EAAQ1B,EAAAA,CAAAA,CAAAA,IAAAA,KAExCb,KAAK2B,MAAS3B,KAAKC,MAAG,MAAIsC,KAAM,OAAO,SAACR,GAAAA;AAEtC,eADAU,MAAMF,EAAAA,IAAUR,GACTF,EAAGS,EAAKb,WAAWM,EAAKlB,EAAAA,CAAAA,CAAAA;MAAAA,CAAAA;IAAAA,GAIvChB;EAAAA,EAAAA;AAtEaD,IAAAC,OAAIA;AAAAA,EADZD,eAAAA,aAAAA,CAAAA,EAAAA;",
  "names": ["YubinBango", "Core", "inputVal", "callback", "this", "URL", "REGION", "a", "replace", "s", "String", "fromCharCode", "charCodeAt", "b", "match", "c", "join", "yubin7", "chk7", "getAddr", "addrDic", "prototype", "val", "length", "region_id", "region", "locality", "street", "extended", "selectAddr", "addr", "jsonp", "url", "fn", "window", "data", "scriptTag", "document", "createElement", "setAttribute", "head", "appendChild", "_this", "yubin3", "substr", "CACHE"]
}
